{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../genesys-cloud.service\";\nimport * as i2 from \"@angular/common\";\nfunction PresencePickerComponent_div_1_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const presence_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", presence_r5.id)(\"selected\", (ctx_r4.user.presence == null ? null : ctx_r4.user.presence.presenceDefinition == null ? null : ctx_r4.user.presence.presenceDefinition.id) === presence_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", presence_r5.languageLabels[ctx_r4.languageLabel], \" \");\n  }\n}\nfunction PresencePickerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"select\", 3, 4);\n    i0.ɵɵlistener(\"change\", function PresencePickerComponent_div_1_Template_select_change_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const _r3 = i0.ɵɵreference(2);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onPresenceChange(_r3.value));\n    });\n    i0.ɵɵtemplate(3, PresencePickerComponent_div_1_option_3_Template, 2, 3, \"option\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function PresencePickerComponent_div_1_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.logoutUser());\n    });\n    i0.ɵɵtext(5, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.presenceDefinitions);\n  }\n}\nfunction PresencePickerComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \" Offline \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let PresencePickerComponent = /*#__PURE__*/(() => {\n  class PresencePickerComponent {\n    constructor(genesysCloudService) {\n      this.genesysCloudService = genesysCloudService;\n      this.languageLabel = 'en_US';\n      this.presenceDefinitions = [];\n    }\n    ngOnInit() {\n      this.genesysCloudService.presenceDefinitions.subscribe(p => this.presenceDefinitions = p);\n    }\n    onPresenceChange(presenceId) {\n      this.genesysCloudService.setUserPresence(this.user.id, presenceId).subscribe(data => {\n        // We just set the local model of the user to the desired presence.\n        // A better way might be to reGET the user's presence\n        this.user.presence = data;\n        console.log('Update presence.');\n      });\n    }\n    logoutUser() {\n      this.genesysCloudService.logoutUser(this.user.id).subscribe(() => {\n        // We just set it to logged out. \n        // A better way might be to reGET the user's presence\n        const presenceDefinition = this.user.presence?.presenceDefinition;\n        if (presenceDefinition) presenceDefinition.systemPresence = 'Offline';\n        console.log('Logged out user.');\n      });\n    }\n    static #_ = this.ɵfac = function PresencePickerComponent_Factory(t) {\n      return new (t || PresencePickerComponent)(i0.ɵɵdirectiveInject(i1.GenesysCloudService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PresencePickerComponent,\n      selectors: [[\"app-presence-picker\"]],\n      inputs: {\n        user: \"user\"\n      },\n      decls: 4,\n      vars: 2,\n      consts: [[1, \"container\"], [4, \"ngIf\", \"ngIfElse\"], [\"userOffline\", \"\"], [\"name\", \"presence\", \"id\", \"presence\", 3, \"change\"], [\"presence\", \"\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [3, \"value\", \"selected\"], [1, \"userOffline\"]],\n      template: function PresencePickerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, PresencePickerComponent_div_1_Template, 6, 1, \"div\", 1)(2, PresencePickerComponent_ng_template_2_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const _r2 = i0.ɵɵreference(3);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.user.presence == null ? null : ctx.user.presence.presenceDefinition == null ? null : ctx.user.presence.presenceDefinition.systemPresence) !== \"Offline\")(\"ngIfElse\", _r2);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\"select[_ngcontent-%COMP%] {\\n  padding: 7px;\\n  border: 1px solid #ccc;\\n  cursor: pointer;\\n  color: #555;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  padding: 8px;\\n  border: 1px solid #ccc;\\n  cursor: pointer;\\n  color: #555;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover{\\n  background-color: #ff8888;\\n  border-color: white;\\n  color: white;\\n}\\n\\n.userOffline[_ngcontent-%COMP%] {\\n  min-height: 33px;\\n  min-width: 159px;\\n  text-align: right;\\n  font-style: italic;\\n  color: #aaa;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJlc2VuY2UtcGlja2VyL3ByZXNlbmNlLXBpY2tlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsV0FBVztBQUNiOztBQUVBO0VBQ0UsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsV0FBVztBQUNiOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsV0FBVztBQUNiIiwic291cmNlc0NvbnRlbnQiOlsic2VsZWN0IHtcclxuICBwYWRkaW5nOiA3cHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgY29sb3I6ICM1NTU7XHJcbn1cclxuXHJcbmJ1dHRvbiB7XHJcbiAgcGFkZGluZzogOHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGNvbG9yOiAjNTU1O1xyXG59XHJcblxyXG5idXR0b246aG92ZXJ7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmODg4ODtcclxuICBib3JkZXItY29sb3I6IHdoaXRlO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLnVzZXJPZmZsaW5lIHtcclxuICBtaW4taGVpZ2h0OiAzM3B4O1xyXG4gIG1pbi13aWR0aDogMTU5cHg7XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgZm9udC1zdHlsZTogaXRhbGljO1xyXG4gIGNvbG9yOiAjYWFhO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n  return PresencePickerComponent;\n})();","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","presence_r5","id","ctx_r4","user","presence","presenceDefinition","ɵɵadvance","ɵɵtextInterpolate1","languageLabels","languageLabel","ɵɵlistener","PresencePickerComponent_div_1_Template_select_change_1_listener","ɵɵrestoreView","_r7","_r3","ɵɵreference","ctx_r6","ɵɵnextContext","ɵɵresetView","onPresenceChange","value","ɵɵtemplate","PresencePickerComponent_div_1_option_3_Template","PresencePickerComponent_div_1_Template_button_click_4_listener","ctx_r8","logoutUser","ctx_r0","presenceDefinitions","PresencePickerComponent","constructor","genesysCloudService","ngOnInit","subscribe","p","presenceId","setUserPresence","data","console","log","systemPresence","_","ɵɵdirectiveInject","i1","GenesysCloudService","_2","selectors","inputs","decls","vars","consts","template","PresencePickerComponent_Template","rf","ctx","PresencePickerComponent_div_1_Template","PresencePickerComponent_ng_template_2_Template","ɵɵtemplateRefExtractor","_r2"],"sources":["C:\\Users\\amerluza\\temp\\prog\\genesys\\temp\\angular-blueprint-review\\genesys-cloud-sample\\src\\app\\presence-picker\\presence-picker.component.ts","C:\\Users\\amerluza\\temp\\prog\\genesys\\temp\\angular-blueprint-review\\genesys-cloud-sample\\src\\app\\presence-picker\\presence-picker.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport * as platformClient from 'purecloud-platform-client-v2';\nimport { GenesysCloudService } from '../genesys-cloud.service';\n\n@Component({\n  selector: 'app-presence-picker',\n  templateUrl: './presence-picker.component.html',\n  styleUrls: ['./presence-picker.component.css']\n})\nexport class PresencePickerComponent implements OnInit {\n  @Input() user!: platformClient.Models.User;\n  languageLabel = 'en_US';\n  presenceDefinitions: platformClient.Models.OrganizationPresence[] = [];\n\n  constructor(\n    private genesysCloudService: GenesysCloudService,\n  ) { }\n\n  ngOnInit(): void {\n    this.genesysCloudService.presenceDefinitions.subscribe(p => this.presenceDefinitions = p);\n  }\n\n  onPresenceChange(presenceId: string){\n    this.genesysCloudService.setUserPresence(this.user.id!, presenceId)\n      .subscribe(data => {\n        // We just set the local model of the user to the desired presence.\n        // A better way might be to reGET the user's presence\n        this.user.presence = data;\n        console.log('Update presence.') \n      });\n  }\n\n  logoutUser() {\n    this.genesysCloudService.logoutUser(this.user.id!)\n      .subscribe(() => {\n        // We just set it to logged out. \n        // A better way might be to reGET the user's presence\n        const presenceDefinition = this.user.presence?.presenceDefinition;\n        if(presenceDefinition) presenceDefinition.systemPresence = 'Offline';\n        console.log('Logged out user.');\n      });\n  }\n}\n","<div class=\"container\">\n  <div \n    *ngIf=\"user.presence?.presenceDefinition?.systemPresence !== 'Offline';\n    else userOffline\"\n  >\n    <select \n      name=\"presence\" \n      id=\"presence\" #presence \n      (change)=\"onPresenceChange(presence.value)\"\n    >\n      <option \n        *ngFor=\"let presence of presenceDefinitions\" \n        [value]=\"presence.id\"\n        [selected]=\"user.presence?.presenceDefinition?.id === presence.id\"\n      >\n        {{presence.languageLabels[languageLabel]}}\n      </option>\n    </select>\n    <button (click)=\"logoutUser()\">Logout</button>\n  </div>\n  <ng-template #userOffline>\n    <div class=\"userOffline\">\n      Offline\n    </div>\n  </ng-template>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}