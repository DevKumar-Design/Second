{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../genesys-cloud.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../queue-details/queue-details.component\";\nfunction QueueListPageComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 6);\n    i0.ɵɵelement(2, \"img\", 7);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction QueueListPageComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"app-queue-details\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const queue_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"queue\", queue_r3);\n  }\n}\nexport let QueueListPageComponent = /*#__PURE__*/(() => {\n  class QueueListPageComponent {\n    constructor(genesysCloudService) {\n      this.genesysCloudService = genesysCloudService;\n      this.searchTerm = new BehaviorSubject('');\n      this.fetching = false;\n    }\n    ngOnInit() {\n      this.queues$ = this.searchTerm.pipe(debounceTime(300), distinctUntilChanged(), tap(() => {\n        this.fetching = true;\n      }), switchMap(term => this.genesysCloudService.searchQueues(term)), tap(() => {\n        this.fetching = false;\n      }));\n      // Set the last searched term\n      this.searchTerm.subscribe(term => {\n        if (term) this.genesysCloudService.lastQueueSearchValue = term;\n      });\n      // If there is a previoulsy searched term, display the results\n      if (this.genesysCloudService.lastQueueSearchValue) {\n        this.searchTerm.next(this.genesysCloudService.lastQueueSearchValue);\n      }\n    }\n    searchQueue(term) {\n      this.searchTerm.next(term);\n    }\n    static #_ = this.ɵfac = function QueueListPageComponent_Factory(t) {\n      return new (t || QueueListPageComponent)(i0.ɵɵdirectiveInject(i1.GenesysCloudService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: QueueListPageComponent,\n      selectors: [[\"app-queue-list-page\"]],\n      decls: 8,\n      vars: 5,\n      consts: [[\"action\", \"#\", \"autocomplete\", \"off\"], [\"type\", \"text\", \"id\", \"search-box\", \"placeholder\", \"Queue Name\", 3, \"value\", \"input\"], [\"searchBox\", \"\"], [4, \"ngIf\"], [1, \"queues-container\"], [\"class\", \"queue-list-entry\", 4, \"ngFor\", \"ngForOf\"], [1, \"spinner\"], [\"src\", \"assets/loading.svg\", \"alt\", \"Loading...\", \"srcset\", \"\"], [1, \"queue-list-entry\"], [3, \"queue\"]],\n      template: function QueueListPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r4 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0)(2, \"input\", 1, 2);\n          i0.ɵɵlistener(\"input\", function QueueListPageComponent_Template_input_input_2_listener() {\n            i0.ɵɵrestoreView(_r4);\n            const _r0 = i0.ɵɵreference(3);\n            return i0.ɵɵresetView(ctx.searchQueue(_r0.value));\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(4, QueueListPageComponent_div_4_Template, 3, 0, \"div\", 3);\n          i0.ɵɵelementStart(5, \"div\", 4);\n          i0.ɵɵtemplate(6, QueueListPageComponent_div_6_Template, 2, 1, \"div\", 5);\n          i0.ɵɵpipe(7, \"async\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"value\", ctx.searchTerm.value);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.fetching);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(7, 3, ctx.queues$));\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.QueueDetailsComponent, i2.AsyncPipe],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n  return QueueListPageComponent;\n})();","map":{"version":3,"names":["BehaviorSubject","debounceTime","distinctUntilChanged","switchMap","tap","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","queue_r3","QueueListPageComponent","constructor","genesysCloudService","searchTerm","fetching","ngOnInit","queues$","pipe","term","searchQueues","subscribe","lastQueueSearchValue","next","searchQueue","_","ɵɵdirectiveInject","i1","GenesysCloudService","_2","selectors","decls","vars","consts","template","QueueListPageComponent_Template","rf","ctx","ɵɵlistener","QueueListPageComponent_Template_input_input_2_listener","ɵɵrestoreView","_r4","_r0","ɵɵreference","ɵɵresetView","value","ɵɵtemplate","QueueListPageComponent_div_4_Template","QueueListPageComponent_div_6_Template","ɵɵpipeBind1"],"sources":["C:\\Users\\amerluza\\temp\\prog\\genesys\\blueprints\\_all\\angular-app-with-genesys-cloud-sdk\\genesys-cloud-sample\\src\\app\\queue-list-page\\queue-list-page.component.ts","C:\\Users\\amerluza\\temp\\prog\\genesys\\blueprints\\_all\\angular-app-with-genesys-cloud-sdk\\genesys-cloud-sample\\src\\app\\queue-list-page\\queue-list-page.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { GenesysCloudService } from '../genesys-cloud.service';\nimport * as platformClient from 'purecloud-platform-client-v2';\nimport { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-queue-list-page',\n  templateUrl: './queue-list-page.component.html',\n  styleUrls: ['./queue-list-page.component.css']\n})\nexport class QueueListPageComponent implements OnInit {\n  searchTerm = new BehaviorSubject<string>('');\n  queues$!: Observable<platformClient.Models.Queue[]>\n  fetching = false;\n\n  constructor(\n    private genesysCloudService: GenesysCloudService,\n  ) { }\n\n  ngOnInit(): void {\n    this.queues$ = this.searchTerm.pipe(\n      debounceTime(300),\n      distinctUntilChanged(),\n      tap(() => { this.fetching = true; }),\n      switchMap((term: string) => this.genesysCloudService.searchQueues(term)),\n      tap(() => { this.fetching = false; })\n    );\n\n    // Set the last searched term\n    this.searchTerm.subscribe(term => {\n      if(term) this.genesysCloudService.lastQueueSearchValue = term;\n    });\n    \n    // If there is a previoulsy searched term, display the results\n    if(this.genesysCloudService.lastQueueSearchValue){\n      this.searchTerm.next(this.genesysCloudService.lastQueueSearchValue);\n    }\n  }\n\n  searchQueue(term: string): void {\n    this.searchTerm.next(term);\n  }\n}\n","<div>\n  <form action=\"#\" autocomplete=\"off\">\n    <input \n      type=\"text\" #searchBox \n      id=\"search-box\"\n      [value]=\"this.searchTerm.value\"\n      (input)=\"searchQueue(searchBox.value)\"\n      placeholder=\"Queue Name\" />\n  </form>\n\n  <div *ngIf=\"fetching\">\n    <div class=\"spinner\">\n      <img src=\"assets/loading.svg\" alt=\"Loading...\" srcset=\"\">\n    </div>\n  </div>\n\n  <div class=\"queues-container\">\n    <div \n      class=\"queue-list-entry\"\n      *ngFor=\"let queue of queues$ | async\"\n    >\n      <app-queue-details [queue]=\"queue\"></app-queue-details>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}