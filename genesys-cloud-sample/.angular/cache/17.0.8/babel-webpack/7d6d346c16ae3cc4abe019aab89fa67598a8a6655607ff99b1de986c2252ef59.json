{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../genesys-cloud.service\";\nimport * as i2 from \"@angular/common\";\nfunction PresencePickerComponent_div_1_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const presence_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", presence_r5.id)(\"selected\", (ctx_r4.user.presence == null ? null : ctx_r4.user.presence.presenceDefinition == null ? null : ctx_r4.user.presence.presenceDefinition.id) === presence_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", presence_r5.languageLabels[ctx_r4.languageLabel], \" \");\n  }\n}\nfunction PresencePickerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"select\", 3, 4);\n    i0.ɵɵlistener(\"change\", function PresencePickerComponent_div_1_Template_select_change_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const _r3 = i0.ɵɵreference(2);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onPresenceChange(_r3.value));\n    });\n    i0.ɵɵtemplate(3, PresencePickerComponent_div_1_option_3_Template, 2, 3, \"option\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function PresencePickerComponent_div_1_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.logoutUser());\n    });\n    i0.ɵɵtext(5, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.presenceDefinitions);\n  }\n}\nfunction PresencePickerComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \" Offline \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let PresencePickerComponent = /*#__PURE__*/(() => {\n  class PresencePickerComponent {\n    constructor(genesysCloudService) {\n      this.genesysCloudService = genesysCloudService;\n      this.languageLabel = 'en_US';\n      this.presenceDefinitions = [];\n    }\n    ngOnInit() {\n      this.genesysCloudService.presenceDefinitions.subscribe(p => this.presenceDefinitions = p);\n    }\n    onPresenceChange(presenceId) {\n      this.genesysCloudService.setUserPresence(this.user.id, presenceId).subscribe(data => {\n        // We just set the local model of the user to the desired presence.\n        // A better way might be to reGET the user's presence\n        this.user.presence = data;\n        console.log('Update presence.');\n      });\n    }\n    logoutUser() {\n      this.genesysCloudService.logoutUser(this.user.id).subscribe(() => {\n        // We just set it to logged out. \n        // A better way might be to reGET the user's presence\n        const presenceDefinition = this.user.presence?.presenceDefinition;\n        if (presenceDefinition) presenceDefinition.systemPresence = 'Offline';\n        console.log('Logged out user.');\n      });\n    }\n    static #_ = this.ɵfac = function PresencePickerComponent_Factory(t) {\n      return new (t || PresencePickerComponent)(i0.ɵɵdirectiveInject(i1.GenesysCloudService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PresencePickerComponent,\n      selectors: [[\"app-presence-picker\"]],\n      inputs: {\n        user: \"user\"\n      },\n      decls: 4,\n      vars: 2,\n      consts: [[1, \"container\"], [4, \"ngIf\", \"ngIfElse\"], [\"userOffline\", \"\"], [\"name\", \"presence\", \"id\", \"presence\", 3, \"change\"], [\"presence\", \"\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [3, \"value\", \"selected\"], [1, \"userOffline\"]],\n      template: function PresencePickerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, PresencePickerComponent_div_1_Template, 6, 1, \"div\", 1)(2, PresencePickerComponent_ng_template_2_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const _r2 = i0.ɵɵreference(3);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.user.presence == null ? null : ctx.user.presence.presenceDefinition == null ? null : ctx.user.presence.presenceDefinition.systemPresence) !== \"Offline\")(\"ngIfElse\", _r2);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\"select[_ngcontent-%COMP%]{padding:7px;border:1px solid #ccc;cursor:pointer;color:#555}button[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;cursor:pointer;color:#555}button[_ngcontent-%COMP%]:hover{background-color:#f88;border-color:#fff;color:#fff}.userOffline[_ngcontent-%COMP%]{min-height:33px;min-width:159px;text-align:right;font-style:italic;color:#aaa}\"]\n    });\n  }\n  return PresencePickerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}