{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../genesys-cloud.service\";\nimport * as i2 from \"@angular/common\";\nfunction QueueDetailsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\")(6, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function QueueDetailsComponent_div_6_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.logoutAgents());\n    });\n    i0.ɵɵtext(7, \" Log Out All Agents \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"OnQueue: \", ctx_r0.onQueueAgents, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Total: \", ctx_r0.totalAgents, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.totalAgents);\n  }\n}\nfunction QueueDetailsComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let QueueDetailsComponent = /*#__PURE__*/(() => {\n  class QueueDetailsComponent {\n    constructor(genesysCloudService) {\n      this.genesysCloudService = genesysCloudService;\n      this.onQueueAgents = 0;\n      this.totalAgents = 0;\n      this.fetching = true;\n    }\n    ngOnInit() {\n      this.getQueueObservations();\n    }\n    getQueueObservations() {\n      if (!this.queue) throw Error('Invalid queue.');\n      this.fetching = true;\n      this.genesysCloudService.getQueueObservations(this.queue.id).subscribe(result => {\n        if (!result.data) throw new Error('Error in getting observations.');\n        this.onQueueAgents = result.data.filter(d => d.metric === 'oOnQueueUsers').reduce((acc, d) => acc + d.stats.count, 0);\n        this.totalAgents = result.data.find(d => d.metric === 'oActiveUsers').stats.count || 0;\n        this.fetching = false;\n      });\n    }\n    logoutAgents() {\n      if (!this.queue?.id) throw new Error('Empty queue');\n      this.fetching = true;\n      this.genesysCloudService.logoutUsersFromQueue(this.queue.id).subscribe(data => {\n        console.log(`Logged out all agents of ${this.queue?.name}`);\n        this.getQueueObservations();\n      });\n    }\n    static #_ = this.ɵfac = function QueueDetailsComponent_Factory(t) {\n      return new (t || QueueDetailsComponent)(i0.ɵɵdirectiveInject(i1.GenesysCloudService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: QueueDetailsComponent,\n      selectors: [[\"app-queue-details\"]],\n      inputs: {\n        queue: \"queue\"\n      },\n      decls: 9,\n      vars: 4,\n      consts: [[1, \"queue-details\"], [1, \"queue-name\"], [1, \"small\"], [\"class\", \"queue-observations\", 4, \"ngIf\", \"ngIfElse\"], [\"loadingIndicator\", \"\"], [1, \"queue-observations\"], [1, \"onqueue\"], [1, \"total\"], [1, \"logout-agents\", 3, \"disabled\", \"click\"], [1, \"spinner\"], [\"src\", \"assets/loading.svg\", \"alt\", \"Loading...\", \"srcset\", \"\"]],\n      template: function QueueDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\");\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 2);\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(6, QueueDetailsComponent_div_6_Template, 8, 3, \"div\", 3)(7, QueueDetailsComponent_ng_template_7_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const _r2 = i0.ɵɵreference(8);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.queue == null ? null : ctx.queue.name);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"id: \", ctx.queue == null ? null : ctx.queue.id, \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.fetching)(\"ngIfElse\", _r2);\n        }\n      },\n      dependencies: [i2.NgIf],\n      styles: [\"div.queue-details[_ngcontent-%COMP%] {\\n  border: 1px solid #ccc;\\n  margin-top: 10px;\\n  padding: 12px 30px;\\n\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n}\\n\\n.queue-observations[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: baseline;\\n}\\n\\n.queue-name[_ngcontent-%COMP%] {\\n  flex-grow: 4;\\n}\\n\\n.onqueue[_ngcontent-%COMP%] {\\n  margin-right: 30px;\\n}\\n\\n.total[_ngcontent-%COMP%] {\\n  margin-right: 30px;\\n}\\n\\nbutton.logout-agents[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  border: 1px solid #ccc;\\n  cursor: pointer;\\n}\\n\\n\\nbutton.logout-agents[_ngcontent-%COMP%]:disabled {\\n  cursor:default;\\n}\\n\\n\\nbutton.logout-agents[_ngcontent-%COMP%]:hover:not([disabled]){\\n  background-color: #ff8888;\\n  border-color: white;\\n  color: white;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcXVldWUtZGV0YWlscy9xdWV1ZS1kZXRhaWxzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjs7RUFFbEIsYUFBYTtFQUNiLDhCQUE4QjtFQUM5Qix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixlQUFlO0FBQ2pCOzs7QUFHQTtFQUNFLGNBQWM7QUFDaEI7OztBQUdBO0VBQ0UseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixZQUFZO0FBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyJkaXYucXVldWUtZGV0YWlscyB7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gIHBhZGRpbmc6IDEycHggMzBweDtcclxuXHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcbn1cclxuXHJcbi5xdWV1ZS1vYnNlcnZhdGlvbnMge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xyXG59XHJcblxyXG4ucXVldWUtbmFtZSB7XHJcbiAgZmxleC1ncm93OiA0O1xyXG59XHJcblxyXG4ub25xdWV1ZSB7XHJcbiAgbWFyZ2luLXJpZ2h0OiAzMHB4O1xyXG59XHJcblxyXG4udG90YWwge1xyXG4gIG1hcmdpbi1yaWdodDogMzBweDtcclxufVxyXG5cclxuYnV0dG9uLmxvZ291dC1hZ2VudHMge1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcblxyXG5idXR0b24ubG9nb3V0LWFnZW50czpkaXNhYmxlZCB7XHJcbiAgY3Vyc29yOmRlZmF1bHQ7XHJcbn1cclxuXHJcblxyXG5idXR0b24ubG9nb3V0LWFnZW50czpob3Zlcjpub3QoW2Rpc2FibGVkXSl7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmODg4ODtcclxuICBib3JkZXItY29sb3I6IHdoaXRlO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n  return QueueDetailsComponent;\n})();","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","QueueDetailsComponent_div_6_Template_button_click_6_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","logoutAgents","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","onQueueAgents","totalAgents","ɵɵproperty","ɵɵelement","QueueDetailsComponent","constructor","genesysCloudService","fetching","ngOnInit","getQueueObservations","queue","Error","id","subscribe","result","data","filter","d","metric","reduce","acc","stats","count","find","logoutUsersFromQueue","console","log","name","_","ɵɵdirectiveInject","i1","GenesysCloudService","_2","selectors","inputs","decls","vars","consts","template","QueueDetailsComponent_Template","rf","ctx","ɵɵtemplate","QueueDetailsComponent_div_6_Template","QueueDetailsComponent_ng_template_7_Template","ɵɵtemplateRefExtractor","ɵɵtextInterpolate","_r2"],"sources":["C:\\Users\\amerluza\\temp\\prog\\genesys\\temp\\angular-blueprint-review\\genesys-cloud-sample\\src\\app\\queue-details\\queue-details.component.ts","C:\\Users\\amerluza\\temp\\prog\\genesys\\temp\\angular-blueprint-review\\genesys-cloud-sample\\src\\app\\queue-details\\queue-details.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { GenesysCloudService } from '../genesys-cloud.service';\nimport * as platformClient from 'purecloud-platform-client-v2';\n\n@Component({\n  selector: 'app-queue-details',\n  templateUrl: './queue-details.component.html',\n  styleUrls: ['./queue-details.component.css']\n})\nexport class QueueDetailsComponent implements OnInit {\n  @Input() queue?: platformClient.Models.UserQueue|platformClient.Models.Queue;\n  onQueueAgents = 0;\n  totalAgents = 0;\n  fetching = true;\n\n  constructor(\n    private genesysCloudService: GenesysCloudService\n  ) { }\n\n  ngOnInit(): void {\n    this.getQueueObservations();\n  }\n\n  getQueueObservations(){\n    if(!this.queue) throw Error('Invalid queue.');\n    this.fetching = true;\n\n    this.genesysCloudService.getQueueObservations(this.queue.id!)\n      .subscribe(result => {\n        if(!result.data) throw new Error('Error in getting observations.')\n\n        this.onQueueAgents = result.data\n                .filter(d => d.metric === 'oOnQueueUsers')\n                .reduce((acc, d) => acc + d.stats!.count!, 0)\n        this.totalAgents = result.data\n                .find(d => d.metric === 'oActiveUsers')!.stats!.count || 0;\n        \n        this.fetching = false;\n      });\n  }\n\n  logoutAgents(){\n    if(!this.queue?.id) throw new Error('Empty queue');\n    this.fetching = true;\n\n    this.genesysCloudService.logoutUsersFromQueue(this.queue.id)\n      .subscribe(data => {\n        console.log(`Logged out all agents of ${this.queue?.name}`);\n        this.getQueueObservations();\n      });\n  } \n}\n","<div class=\"queue-details\">\n  <div class=\"queue-name\">\n    <div>{{queue?.name}}</div> \n    <div class=\"small\">id: {{queue?.id}}</div> \n  </div>\n  <div *ngIf=\"!fetching; else loadingIndicator\" class=\"queue-observations\">\n    <div class=\"onqueue\">OnQueue: {{this.onQueueAgents}}</div>\n    <div class=\"total\">Total: {{this.totalAgents}}</div>\n    <div>\n      <button [disabled]=\"!totalAgents\" class=\"logout-agents\" (click)=\"logoutAgents()\">\n        Log Out All Agents\n      </button>\n    </div>\n  </div>\n  <ng-template #loadingIndicator>\n    <div class=\"spinner\">\n      <img src=\"assets/loading.svg\" alt=\"Loading...\" srcset=\"\">\n    </div>\n  </ng-template>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}